# -*- coding: utf-8 -*-
"""
联环集团及子公司信息 - 统一维护文件

维护说明：
- 集团简介更新：修改 GROUP_INTRO
- 公司荣誉更新：修改 COMPANY_HONORS
- 合并关系更新：修改 MERGED_COMPANY_SUBS
- 新增无财务数据企业：修改 NO_FINANCE_COMPANIES
"""

from typing import Dict, List, Any

# ============================================================
# 一、集团简介（整理后的格式）
# ============================================================
GROUP_INTRO = """江苏联环药业集团有限公司

【基本信息】
- 性质：综合性国有全资医药企业
- 级别：扬州市市属一级企业、AA+信用等级
- 前身：1958年成立的扬州制药厂
- 主业：医药制造、医疗器械、医养健康

【企业规模】
- 连续多年荣登中国制药工业企业百强榜
- 拥有十多家二级企业、2家上市公司
- 12家高新技术企业
- 3家国家级专精特新企业、5家省级专精特新企业
- 1家江苏省独角兽企业

【荣誉资质】
- 全国"科改示范企业"
- 连续两年被国务院国资委评为科改示范"标杆"企业
- 联环股份入选创建世界一流专业领军示范企业
- 江苏仅有的全国"双示范"创建企业

【研发实力】
- 研发平台：院士工作站、博士工作站、"一中心五所"
- 研发团队：20名博士、200名硕士
- 研发成果：国家一类新药爱普列特等10多个国家级新药，583项发明专利

【企业精神】
守正创新、精业笃行
"""

# ============================================================
# 二、合并公司的子公司关系
# ============================================================
MERGED_COMPANY_SUBS: Dict[str, Dict[str, Any]] = {
    "lhjthb": {
        "name": "股份(合)",
        "aliases": ["联环股份(合)"],
        "subs": ["联环股份", "制药有限", "联环营销(合)", "联环医疗(合)", "成都亚中", "联环投资(不含龙一)", "南京联智", "常乐制药"],
    },
    "lbyyhb": {
        "name": "联博(合)",
        "aliases": ["联博药业(合)"],
        "subs": ["联博药业", "大同同星"],
    },
    "plshb": {
        "name": "普林斯(合)",
        "aliases": ["普林斯(合并)"],
        "subs": ["普林斯", "普林斯安庆", "斯德瑞克"],
    },
    "jkcyhb": {
        "name": "产业(合)",
        "aliases": ["健康产业(合)"],
        "subs": ["健康产业", "大药房", "欧华迪", "医疗科技", "联环医院"],
    },
    "ydjyhb": {
        "name": "基因(合)",
        "aliases": ["扬大基因(合)"],
        "subs": ["基因", "联诺", "可润"],
    },
}

# ============================================================
# 三、独立公司的别名
# ============================================================
COMPANY_ALIASES: Dict[str, List[str]] = {
    "ltyyhb": ["联通医药", "联通设备"],
    "yhtzy": ["颐和堂", "颐和堂中药"],
    "khyy": ["康和药业", "安徽康和"],
}

# ============================================================
# 四、所有企业的荣誉信息
# ============================================================
COMPANY_HONORS: Dict[str, List[str]] = {
    # === 有独立财务数据的企业 ===
    "联环股份": ["高新技术企业", "国家级专精特新", "省级绿色工厂", "省级先进级智能工厂"],
    "圣氏化学": ["高新技术企业", "省级专精特新"],
    "普林斯": ["高新技术企业", "国家级专精特新"],
    "联博": ["高新技术企业", "省级专精特新"],
    "颐和堂": ["高新技术企业"],
    "康和药业": ["高新技术企业"],
    "联通医药": ["高新技术企业"],

    # === 子公司（财务数据在对应的"合"中）===
    "斯德瑞克": ["高新技术企业", "国家级专精特新", "省级绿色工厂", "省级先进级智能工厂"],
    "普林斯安庆": ["高新技术企业", "省级专精特新"],
    "成都亚中": ["高新技术企业", "省级专精特新"],
    "南京联智": ["高新技术企业"],
    "常乐制药": ["高新技术企业", "省级专精特新"],
    "大同同星": ["国家级绿色工厂"],

    # === 独立子公司（不在财务数据中）===
    "睿源生物": ["江苏省独角兽企业"],
}

# ============================================================
# 五、子公司到合并公司的映射
# ============================================================
SUB_TO_MERGED: Dict[str, str] = {
    "斯德瑞克": "plshb",
    "普林斯安庆": "plshb",
    "成都亚中": "lhjthb",
    "南京联智": "lhjthb",
    "常乐制药": "lhjthb",
    "大同同星": "lbyyhb",
    "联博药业": "lbyyhb",
}

# ============================================================
# 六、完全没有财务数据的企业
# ============================================================
NO_FINANCE_COMPANIES = ["睿源生物"]

# ============================================================
# 七、荣誉名词解释（2025年官方认定标准）
# ============================================================
HONOR_DEFINITIONS: Dict[str, str] = {
    "高新技术企业": "科技部认定，从事高新技术研发的企业，享受15%企业所得税优惠",
    "国家级专精特新": "工信部认定的专精特新'小巨人'企业，具有专业化、精细化、特色化、新颖化特征",
    "省级专精特新": "省级工信厅认定的专精特新中小企业，是国家级小巨人的培育梯队",
    "国家级绿色工厂": "工信部认定，实现用地集约化、生产洁净化、能源低碳化的标杆企业",
    "省级绿色工厂": "省级工信厅认定的绿色制造示范企业",
    "省级先进级智能工厂": "江苏省工信厅认定，实现数字化网络化生产的标杆工厂",
    "江苏省独角兽企业": "估值超过10亿美元的高成长创新企业",
}


def build_company_context() -> str:
    """构建公司信息上下文，供提示词使用。"""
    lines = []

    # 1. 合并公司说明
    lines.append("【合并公司说明】")
    for code, info in MERGED_COMPANY_SUBS.items():
        aliases = f"（别名：{', '.join(info['aliases'])}）" if info.get("aliases") else ""
        lines.append(f"- {info['name']}{aliases} 包含：{', '.join(info['subs'])}")
    lines.append("查询子公司财务数据时，使用对应的合并公司编号查询。")
    lines.append("回答合并公司的财务数据时，应主动说明该数据包含哪些子公司。\n")

    # 2. 无财务数据企业
    lines.append(f"【无财务数据企业】{', '.join(NO_FINANCE_COMPANIES)}")
    lines.append("用户问这些企业财务数据时，说明暂无数据，但可展示荣誉信息。\n")

    # 3. 荣誉汇总
    honors_map: Dict[str, List[str]] = {}
    for company, honors in COMPANY_HONORS.items():
        for honor in honors:
            honors_map.setdefault(honor, []).append(company)

    lines.append("【企业荣誉汇总】")
    for honor, companies in honors_map.items():
        lines.append(f"- {honor}：{', '.join(companies)}")

    return "\n".join(lines)


__all__ = [
    "GROUP_INTRO",
    "MERGED_COMPANY_SUBS",
    "COMPANY_ALIASES",
    "COMPANY_HONORS",
    "SUB_TO_MERGED",
    "NO_FINANCE_COMPANIES",
    "HONOR_DEFINITIONS",
    "build_company_context",
]
